<mujoco model="xarm6_transfer_cube">
    <include file="scene.xml"/>
    <include file="xarm6_dependencies.xml"/>
    <worldbody>
        <include file="xarm6_gripper.xml" />

        <body name="box" pos="0.2 0.5 0.05">
            <joint name="red_box_joint" type="free" frictionloss="0.01" />
            <inertial pos="0 0 0" mass="0.05" diaginertia="0.002 0.002 0.002" />
            <geom condim="4" solimp="2 1 0.01" solref="0.01 1" friction="1 0.005 0.0001" pos="0 0 0" size="0.02 0.02 0.02" type="box" name="red_box" rgba="1 0 0 1" />
        </body>

    </worldbody>

    <!-- Equality constraints to implement mimic behavior -->
    <equality>
        <joint joint1="left_finger_joint"         joint2="drive_joint" polycoef="0 1 0 0 0"  solref="0.002 1" solimp="0.98 0.99 0.001"/>
        <joint joint1="left_inner_knuckle_joint"  joint2="drive_joint" polycoef="0 1 0 0 0"  solref="0.002 1" solimp="0.98 0.99 0.001"/>
        <joint joint1="right_finger_joint"        joint2="drive_joint" polycoef="0 1 0 0 0"  solref="0.002 1" solimp="0.98 0.99 0.001"/>
        <joint joint1="right_outer_knuckle_joint" joint2="drive_joint" polycoef="0 -1 0 0 0" solref="0.002 1" solimp="0.98 0.99 0.001"/>
        <joint joint1="right_inner_knuckle_joint" joint2="drive_joint" polycoef="0 -1 0 0 0" solref="0.002 1" solimp="0.98 0.99 0.001"/>
    </equality>

    <actuator>
        <!-- arm actuators -->
        <position joint="joint1" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-50 50"/>
        <position joint="joint2" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-50 50"/>
        <position joint="joint3" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-32 32"/>
        <position joint="joint4" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-32 32"/>
        <position joint="joint5" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-32 32"/>
        <position joint="joint6" kp="350" user="1" ctrllimited="true" ctrlrange="-31.41592653589793 31.41592653589793" forcelimited="true" forcerange="-20 20"/>
    
        <!-- gripper drive joint -->
        <position ctrllimited="true" ctrlrange="0 0.85" joint="drive_joint" kp="200" user="1" forcelimited="true" forcerange="-50 50"/>
    </actuator>

    <keyframe>
        <!-- 6 rotation joints + gripper drive joint + 5 mimic joints = 12 qpos -->
        <key qpos="0.0 -0.5236 -1.0472 0.0 1.57 0.0  0.0 0.0 0.0 0.0 0.0 0.0  0.0 0.5 0.05 1 0 0 0"/>
    </keyframe>
</mujoco>