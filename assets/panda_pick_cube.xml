<mujoco model="panda_ee_pick_cube">
    <include file="scene.xml"/>
    <include file="panda_dependencies.xml"/>

    <worldbody>
        <include file="panda.xml" />
        <body mocap="true" name="mocap" pos="0.04550052 0.59999593 0.53150243">
            <site pos="0 0 0" size="0.003 0.003 0.03" type="box" name="mocap_site1" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.003 0.03 0.003" type="box" name="mocap_site2" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.03 0.003 0.003" type="box" name="mocap_site3" rgba="1 0 0 1"/>
        </body>

        <body name="red_box" pos="-0.1 0.5 0.05">
            <joint name="red_box_joint" type="free" frictionloss="0.01" />
            <inertial pos="0 0 0" mass="0.05" diaginertia="0.002 0.002 0.002" />
            <geom condim="4" solimp="2 1 0.01" solref="0.01 1" friction="1 0.005 0.0001" pos="0 0 0" size="0.02 0.02 0.02" type="box" name="red_box" rgba="1 0 0 1" />
        </body>

        <!-- Goal point -->
        <body name="target_point" pos="0.1 0.4 0.1">
            <site pos="0 0 0" size="0.015" type="sphere" name="target_site" rgba="0 1 0 1"/>
            <geom pos="0 0 0" size="0.01 0.002" type="cylinder" name="target_marker" 
                  rgba="0 1 0 0.8" contype="0" conaffinity="0" group="2" mass="0"/>
        </body>
    </worldbody>

  <tendon>
    <fixed name="split">
      <joint joint="finger_joint1" coef="0.5"/>
      <joint joint="finger_joint2" coef="0.5"/>
    </fixed>
  </tendon>

  <!-- <equality>
    <joint joint1="finger_joint1" joint2="finger_joint2" solimp="0.95 0.99 0.001" solref="0.005 1"/>
    <weld body1="mocap" body2="link7" solref="0.01 1" solimp="0.25 0.25 0.001" />
  </equality> -->

  <actuator>
    <general class="panda" name="actuator1" joint="joint1" gainprm="4500" biasprm="0 -4500 -450"/>
    <general class="panda" name="actuator2" joint="joint2" gainprm="4500" biasprm="0 -4500 -450"
      ctrlrange="-1.7628 1.7628"/>
    <general class="panda" name="actuator3" joint="joint3" gainprm="3500" biasprm="0 -3500 -350"/>
    <general class="panda" name="actuator4" joint="joint4" gainprm="3500" biasprm="0 -3500 -350"
      ctrlrange="-3.0718 -0.0698"/>
    <general class="panda" name="actuator5" joint="joint5" gainprm="2000" biasprm="0 -2000 -200" forcerange="-12 12"/>
    <general class="panda" name="actuator6" joint="joint6" gainprm="2000" biasprm="0 -2000 -200" forcerange="-12 12"
      ctrlrange="-0.0175 3.7525"/>
    <general class="panda" name="actuator7" joint="joint7" gainprm="2000" biasprm="0 -2000 -200" forcerange="-12 12"/>
    <!-- Remap original ctrlrange (0, 0.04) to (0, 255): 0.04 * 100 / 255 = 0.01568627451 -->
    <general class="panda" name="actuator8" tendon="split" forcerange="-100 100" ctrlrange="0 255"
      gainprm="0.01568627451 0 0" biasprm="0 -100 -10"/>
  </actuator>

    <keyframe>
        <key name="home" qpos="0 0 0 -1.57079 0 1.57079 -0.7853 0.04 0.04  0.0 0.5 0.05 1 0 0 0"/>
    </keyframe>

</mujoco>